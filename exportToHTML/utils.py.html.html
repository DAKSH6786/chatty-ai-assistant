<html>
<head>
<title>utils.py.html</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #0033b3;}
.s2 { color: #174ad4;}
.s3 { color: #067d17;}
.s4 { color: #174be6;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
utils.py.html</font>
</center></td></tr></table>
<pre><span class="s0">&lt;</span><span class="s1">html</span><span class="s0">&gt;</span>
<span class="s0">&lt;</span><span class="s1">head</span><span class="s0">&gt;</span>
<span class="s0">&lt;</span><span class="s1">title</span><span class="s0">&gt;utils.py&lt;/</span><span class="s1">title</span><span class="s0">&gt;</span>
<span class="s0">&lt;</span><span class="s1">meta </span><span class="s2">http-equiv</span><span class="s3">=&quot;Content-Type&quot; </span><span class="s2">content</span><span class="s3">=&quot;text/html; charset=utf-8&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;</span><span class="s1">style </span><span class="s2">type</span><span class="s3">=&quot;text/css&quot;</span><span class="s0">&gt;</span>
<span class="s0">.s0 { color: #0033b3;}</span>
<span class="s0">.s1 { color: #080808;}</span>
<span class="s0">.s2 { color: #008080; font-weight: bold;}</span>
<span class="s0">.s3 { color: #0037a6;}</span>
<span class="s0">.s4 { color: #1750eb;}</span>
<span class="s0">&lt;/</span><span class="s1">style</span><span class="s0">&gt;</span>
<span class="s0">&lt;/</span><span class="s1">head</span><span class="s0">&gt;</span>
<span class="s0">&lt;</span><span class="s1">body </span><span class="s2">bgcolor</span><span class="s3">=&quot;#ffffff&quot;</span><span class="s0">&gt;</span>
<span class="s0">&lt;</span><span class="s1">table </span><span class="s2">CELLSPACING</span><span class="s3">=0 </span><span class="s2">CELLPADDING</span><span class="s3">=5 </span><span class="s2">COLS</span><span class="s3">=1 </span><span class="s2">WIDTH</span><span class="s3">=&quot;100%&quot; </span><span class="s2">BGCOLOR</span><span class="s3">=&quot;#c0c0c0&quot; </span><span class="s0">&gt;</span>
<span class="s0">&lt;</span><span class="s1">tr</span><span class="s0">&gt;&lt;</span><span class="s1">td</span><span class="s0">&gt;&lt;</span><span class="s1">center</span><span class="s0">&gt;</span>
<span class="s0">&lt;</span><span class="s1">font </span><span class="s2">face</span><span class="s3">=&quot;Arial, Helvetica&quot; </span><span class="s2">color</span><span class="s3">=&quot;#000000&quot;</span><span class="s0">&gt;</span>
<span class="s0">utils.py&lt;/</span><span class="s1">font</span><span class="s0">&gt;</span>
<span class="s0">&lt;/</span><span class="s1">center</span><span class="s0">&gt;&lt;/</span><span class="s1">td</span><span class="s0">&gt;&lt;/</span><span class="s1">tr</span><span class="s0">&gt;&lt;/</span><span class="s1">table</span><span class="s0">&gt;</span>
<span class="s0">&lt;</span><span class="s1">pre</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s0&quot;</span><span class="s0">&gt;import &lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;re&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>
<span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s0&quot;</span><span class="s0">&gt;import &lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;os&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>
<span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s0&quot;</span><span class="s0">&gt;import &lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;random&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>



<span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s0&quot;</span><span class="s0">&gt;class &lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;Utils:&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>
    <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s0&quot;</span><span class="s0">&gt;def &lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;__init__(self,logger):&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>
        <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;self.logger = logger&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>

        <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;@staticmethod&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>
        <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s0&quot;</span><span class="s0">&gt;def &lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;normalize_utterances(self,utterances):&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>
          <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;normalized = &lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s2&quot;</span><span class="s0">&gt;''&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>
          <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s0&quot;</span><span class="s0">&gt;for &lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;u &lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s0&quot;</span><span class="s0">&gt;in &lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;utterances:&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>
            <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;u = re.sub(&lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s2&quot;</span><span class="s0">&gt;'&lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s3&quot;</span><span class="s0">&gt;\\&lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s2&quot;</span><span class="s0">&gt;W+'&lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;,&lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s2&quot;</span><span class="s0">&gt;''&lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;,u)&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>
            <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;normalized += u.lower().strip() + &lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s2&quot;</span><span class="s0">&gt;</span><span class="s4">&amp;quot;</span><span class="s0">|</span><span class="s4">&amp;quot;</span><span class="s0">&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>

          <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s0&quot;</span><span class="s0">&gt;return &lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;normalized[:-&lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s4&quot;</span><span class="s0">&gt;1&lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;]&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>

    <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;@staticmethod&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>
    <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s0&quot;</span><span class="s0">&gt;def &lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;match_pattern(voice_note,pattern):&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>
            <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;data = Utils.normalize_utterances(pattern)&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>
            <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;compiled = re.compile(data)&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>
            <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;value = compiled.search(voice_note)&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>
            <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s0&quot;</span><span class="s0">&gt;if &lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;value:&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>
                <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s0&quot;</span><span class="s0">&gt;return True&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>
            <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s0&quot;</span><span class="s0">&gt;else&lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;:&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>
                <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s0&quot;</span><span class="s0">&gt;False&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>

    <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;@staticmethod&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>
    <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s0&quot;</span><span class="s0">&gt;def &lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;choose_random(response):&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>
        <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s0&quot;</span><span class="s0">&gt;return &lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;random.choice(response)&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>

    <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;@staticmethod&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>
    <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s0&quot;</span><span class="s0">&gt;def &lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;playsound(response):&lt;/</span><span class="s1">span</span><span class="s0">&gt;</span>
          <span class="s0">&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;os.system(&lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s2&quot;</span><span class="s0">&gt;' say</span><span class="s4">&amp;quot;</span><span class="s0">{}</span><span class="s4">&amp;quot; </span><span class="s0">'&lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;</span><span class="s1">span </span><span class="s2">class</span><span class="s3">=&quot;s1&quot;</span><span class="s0">&gt;.format(response))&lt;/</span><span class="s1">span</span><span class="s0">&gt;&lt;/</span><span class="s1">pre</span><span class="s0">&gt;</span>
<span class="s0">&lt;/</span><span class="s1">body</span><span class="s0">&gt;</span>
<span class="s0">&lt;/</span><span class="s1">html</span><span class="s0">&gt;</span></pre>
</body>
</html>